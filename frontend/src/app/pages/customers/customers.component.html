<header class="header">
    <h1 class="header-title">Customers</h1>
</header>

<div class="page-content">
    <div class="page-header">
        <div>
            <h2 class="page-title">Customer Management</h2>
            <p class="text-muted text-sm">Manage your customer accounts</p>
        </div>
        <button class="btn btn-primary" (click)="openModal()">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2">
                <path d="M5 12h14" />
                <path d="M12 5v14" />
            </svg>
            Add Customer
        </button>
    </div>

    @if (loading()) {
    <div class="flex justify-center items-center" style="padding: 3rem;">
        <div class="spinner"></div>
    </div>
    } @else if (customers().length === 0) {
    <div class="card">
        <div class="empty-state">
            <div class="empty-state-icon">ðŸ‘¥</div>
            <div class="empty-state-title">No customers yet</div>
            <p>Get started by adding your first customer.</p>
            <button class="btn btn-primary mt-4" (click)="openModal()">Add Customer</button>
        </div>
    </div>
    } @else {
    <div class="card">
        <div class="table-container">
            <table class="table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th class="text-right">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @for (customer of customers(); track customer.id) {
                    <tr>
                        <td>
                            <span class="badge badge-outline">#{{ customer.id }}</span>
                        </td>
                        <td class="font-medium">{{ customer.name }}</td>
                        <td class="text-muted">{{ customer.email }}</td>
                        <td class="text-right">
                            <div class="flex justify-end gap-2">
                                <button class="btn btn-ghost btn-sm" (click)="openModal(customer)">
                                    Edit
                                </button>
                                <button class="btn btn-destructive btn-sm" (click)="deleteCustomer(customer)">
                                    Delete
                                </button>
                            </div>
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
    }

    <!-- Modal -->
    @if (showModal()) {
    <div class="modal-overlay" (click)="closeModal()">
        <div class="modal" (click)="$event.stopPropagation()">
            <div class="modal-header">
                <h3 class="modal-title">{{ editingCustomer() ? 'Edit Customer' : 'Add Customer' }}</h3>
                <p class="modal-description">{{ editingCustomer() ? 'Update customer information' : 'Create a new
                    customer account' }}</p>
            </div>
            <div class="modal-content">
                <div class="form-group">
                    <label class="label" for="name">Name</label>
                    <input type="text" id="name" class="input" [value]="formData().name"
                        (input)="updateFormField('name', $any($event.target).value)"
                        placeholder="Enter customer name" />
                </div>
                <div class="form-group">
                    <label class="label" for="email">Email</label>
                    <input type="email" id="email" class="input" [value]="formData().email"
                        (input)="updateFormField('email', $any($event.target).value)"
                        placeholder="Enter email address" />
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" (click)="closeModal()">Cancel</button>
                <button class="btn btn-primary" (click)="saveCustomer()" [disabled]="saving()">
                    {{ saving() ? 'Saving...' : (editingCustomer() ? 'Update' : 'Create') }}
                </button>
            </div>
        </div>
    </div>
    }
</div>